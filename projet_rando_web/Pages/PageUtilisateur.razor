@page "/utilisateur/{id}"
@inject projet_rando_web.Interfaces.IRandonnee randonneeService
@inject AuthenticationStateProvider authStateProvider
@inject IJSRuntime jsRuntime
@inject NavigationManager navManager

<main class="bg-dark text-light">
    <div class="container pt-3 pb-3">

        <AuthorizeView>
                <Authorized>
                    <h2>@utilisateurSession.Pseudo</h2>

                    <h3>Mon profil</h3>
                    <p>Mon niveau : @utilisateurSession.Echelon</p>
                    <p>Ma langue préférée : @utilisateurSession.Langue</p>
                <!-- TODO : Partie info utilisateur avec possibilite de modification -->
                    <p>Modifier mon profil - Fonctionalité à venir</p>

                    <h3>Mes randonnées crées</h3>
                    <h4>À venir</h4>
                    @if (_randonneesFuturesAuteur != null && _randonneesFuturesAuteur.Count() != 0)
                    {
                        <div class="row">
                            @foreach (var randonnee in _randonneesFuturesAuteur)
                            {
                                <div class="col-md-4 mb-4">
                                    <div class="card border-0 shadow-sm">
                                        <img src="@($"https://picsum.photos/id/{i}/1000/1000")" class="card-img-top" alt="Image de la randonnée">
                                        <div class="card-body">
                                            <h5 class="card-title">@randonnee.Nom</h5>
                                            <p>Ville de départ : @randonnee.EndroitDepart.Nom</p>
                                            @if (randonnee.EndroitRetour != null)
                                            {
                                                <p>Ville de retour : @randonnee.EndroitRetour.Nom</p>
                                            }
                                            <a href="/detail/@randonnee.Id" class="btn btn-outline-dark">Détails</a>
                                        </div>
                                    </div>
                                </div>
                                i+= 10;
                            }
                        </div>
                    }
                    else
                    {
                        <p>Aucune randonnée crée prochainement.</p>
                    }
                    <h4>Archivés</h4>
                    @if (_randonneesPasseesAuteur != null && _randonneesPasseesAuteur.Count() != 0)
                    {
                        <div class="row">
                            @foreach (var randonnee in _randonneesPasseesAuteur)
                            {
                                <div class="col-md-4 mb-4">
                                    <div class="card border-0 shadow-sm">
                                        <img src="@($"https://picsum.photos/id/{i}/1000/1000")" class="card-img-top" alt="Image de la randonnée">
                                        <div class="card-body">
                                            <h5 class="card-title">@randonnee.Nom</h5>
                                            <p>Ville de départ : @randonnee.EndroitDepart.Nom</p>
                                            @if (randonnee.EndroitRetour != null)
                                            {
                                                <p>Ville de retour : @randonnee.EndroitRetour.Nom</p>
                                            }
                                            <a href="/detail/@randonnee.Id" class="btn btn-outline-dark">Détails</a>
                                        </div>
                                    </div>
                                </div>
                                i+= 10;
                            }
                        </div>
                    }
                    else
                    {
                        <p>Aucune randonnée crée archivée.</p>
                    }
                    <h3>Mes randonnées participants</h3>
                    <h4>À venir</h4>
                    @if (_randonneesFuturesParticipant != null && _randonneesFuturesParticipant.Count() != 0)
                    {
                        <div class="row">
                        @foreach (var randonnee in _randonneesFuturesAuteur)
                        {
                            <div class="col-md-4 mb-4">
                                <div class="card border-0 shadow-sm">
                                    <img src="@($"https://picsum.photos/id/{i}/1000/1000")" class="card-img-top" alt="Image de la randonnée">
                                    <div class="card-body">
                                        <h5 class="card-title">@randonnee.Nom</h5>
                                        <p>Ville de départ : @randonnee.EndroitDepart.Nom</p>
                                        @if (randonnee.EndroitRetour != null)
                                        {
                                            <p>Ville de retour : @randonnee.EndroitRetour.Nom</p>
                                        }
                                        <a href="/detail/@randonnee.Id" class="btn btn-outline-dark">Détails</a>
                                    </div>
                                </div>
                            </div>
                            i+= 10;
                        }
                        </div>
                    }
                    else
                    {
                        <p>Aucune inscription à une randonnée.</p>
                    }
                    <h4>Archivés</h4>
                    @if (_randonneesPasseesParticipant != null && _randonneesPasseesParticipant.Count() != 0)
                    {
                        <div class="row">
                            @foreach (var randonnee in _randonneesPasseesParticipant)
                            {
                                <div class="col-md-4 mb-4">
                                    <div class="card border-0 shadow-sm">
                                        <img src="@($"https://picsum.photos/id/{i}/1000/1000")" class="card-img-top" alt="Image de la randonnée">
                                        <div class="card-body">
                                            <h5 class="card-title">@randonnee.Nom</h5>
                                            <p>Ville de départ : @randonnee.EndroitDepart.Nom</p>
                                            @if (randonnee.EndroitRetour != null)
                                            {
                                                <p>Ville de retour : @randonnee.EndroitRetour.Nom</p>
                                            }
                                            <a href="/detail/@randonnee.Id" class="btn btn-outline-dark">Détails</a>
                                        </div>
                                    </div>
                                </div>
                                i+= 10;
                            }
                        </div>
                    }
                    else
                    {
                        <p>Aucune participation à une randonnée.</p>
                    }
                </Authorized>
                <NotAuthorized>
                    <h3>Inscrivez-vous ou connectez-vous pour avoir accès à votre page personnalisée !</h3>
                </NotAuthorized>
            </AuthorizeView>

    </div>
</main>
    
